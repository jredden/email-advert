package com.zenred.eadvert.service;

import static org.junit.Assert.assertTrue;

import java.util.ArrayList;
import java.util.List;

import org.junit.Before;
import org.junit.Test;

import com.zenred.eadvert.RuntimeLikeSetup;
import com.zenred.eadvert.exception.EmailServiceException;
import com.zenred.eadvert.service.EmailService.BaseAndLeaf;

public class EmailService4Test {
	
	private EmailService emailService;
	private RuntimeLikeSetup runtimeLikeSetup;
	
	@Before
	public void setUp(){
		runtimeLikeSetup = RuntimeLikeSetup.getRuntimeLikeSetup();
		emailService = (EmailService) runtimeLikeSetup.getBean("emailService");
	}

	@Test
	public void addImageListSplit() throws EmailServiceException{
		boolean testIt = false;
		List<String> graphicsUriList = new ArrayList<String>();
		graphicsUriList.add("http://www.email_advert.com/fckeditor/editor/images/smiley/msn/tounge_smile.gif");
		graphicsUriList.add("http://www.email_advert.com/_m/Speaker_256.png");
		List<BaseAndLeaf> list = emailService.genBaseNames(emailService.genBaseAndLeaves(graphicsUriList));
		for (BaseAndLeaf baseAndLeaf : list){
			System.out.println(baseAndLeaf);
		}
		String pageStuff = "<?php require_once(\"classes/phpmailer.php\");ob_start();?><p>Cogito ergo spud, I&nbsp;think therefore I&nbsp;yam. &nbsp; &nbsp; <img src=\"http://www.email_advert.com/fckeditor/editor/images/smiley/msn/tounge_smile.gif\" alt=\"\" />&nbsp;&nbsp;&nbsp; weee!&nbsp;&nbsp; happy happy joy joy!</p><br /><p>If you do not wish to receive future e-mails from our system click on this link <a href=\"www.email_advert.com/optOut.do?emailAddress=bafqoxz@dazdopq.org\">Please un-register my e-mail address</a></p><?$buffer = ob_get_contents();ob_clean();define(\"MESSAGE_BODY\", $buffer);?><?$buffer = ob_get_clean();$mailer = new PHPMailer();$mailer->From = \"jredden@matrix-consultants.com\";   				$mailer->FromName = \"matrix\";			$mailer->Sender = $mailer->From;$mailer->AddReplyTo(\"bafqoxz@dazdopq.org\",\"QA\");$mailer->Subject = \"mumblesOne information\";$mailer->IsHTML(true);$mailer->Body = MESSAGE_BODY;$mailer->AddEmbeddedImage(\"lightbulb.gif\",\"lightbulb\", \"\", \"base64\", \".\");$mailer->IsSave();$mailer->AddAddress(\"<bafqoxz@dazdopq.org>\",\"QA\");if( ! ($result = $mailer->Send()) ):		echo $mailer->ErrorInfo;endif;echo $result;<?php require_once(\"classes/phpmailer.php\");ob_start();?>	<Template title=\"Image and Title\" image=\"http://www.email_advert.com/_m/NoImage.jpg\">	<Description>Master</Description>		<Html>			<![CDATA[<p>Non illigitum corbundum est.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src=\"http://www.email_advert.com/fckeditor/editor/images/smiley/msn/devil_smile.gif\" alt=\"\" /></p><ol>    <li>ouch</li>    <li>revenge</li>    <li>forgiveness</li></ol>			]]>		</Html>	</Template><p>If you do not wish to receive future e-mails from our system click on this link <a href=\"www.email_advert.com/optOut.do?emailAddress=bafqoxz@dazdopq.org\">Please un-register my e-mail address</a></p><?$buffer = ob_get_contents();ob_clean();define(\"MESSAGE_BODY\", $buffer);?><?$buffer = ob_get_clean();$mailer = new PHPMailer();$mailer->From = \"jredden@matrix-consultants.com\";   	$mailer->FromName = \"matrix\";			$mailer->Sender = $mailer->From;$mailer->AddReplyTo(\"bafqoxz@dazdopq.org\",\"QA\");$mailer->Subject = \"mumblesOne information\";$mailer->IsHTML(true);$mailer->Body = MESSAGE_BODY;$mailer->AddEmbeddedImage(\"devil_smile.gif\",\"devil_smile\", \"\", \"base64\", \".\");$mailer->IsSave();$mailer->AddAddress(\"<bafqoxz@dazdopq.org>\",\"QA\");if( ! ($result = $mailer->Send()) ):		echo $mailer->ErrorInfo;endif;echo $result;<?php require_once(\"classes/phpmailer.php\");ob_start();?><p>Non illigitum corbundum est.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img alt=\"\" src=\"http://www.email_advert.com/fckeditor/editor/images/smiley/msn/devil_smile.gif\" /></p><ol>    <li>ouch</li>    <li>revenge</li>    <li>forgiveness</li>    <li>joy</li>    <li>&nbsp;</li></ol><p>If you do not wish to receive future e-mails from our system click on this link <a href=\"www.email_advert.com/optOut.do?emailAddress=bafqoxz@dazdopq.org\">Please un-register my e-mail address</a></p><?$buffer = ob_get_contents();ob_clean();define(\"MESSAGE_BODY\", $buffer);?><?$buffer = ob_get_clean();$mailer = new PHPMailer();$mailer->From = \"jredden@matrix-consultants.com\";   				$mailer->FromName = \"matrix\";			$mailer->Sender = $mailer->From;$mailer->AddReplyTo(\"bafqoxz@dazdopq.org\",\"QA\");$mailer->Subject = \"mumblesOne information\";$mailer->IsHTML(true);$mailer->Body = MESSAGE_BODY;$mailer->AddEmbeddedImage(\"devil_smile.gif\",\"devil_smile\", \"\", \"base64\", \".\");$mailer->IsSave();$mailer->AddAddress(\"<bafqoxz@dazdopq.org>\",\"QA\");if( ! ($result = $mailer->Send()) ):		echo $mailer->ErrorInfo;endif;echo $result;<?php require_once(\"classes/phpmailer.php\");ob_start();?>Type in Data and/or load a Template<p>If you do not wish to receive future e-mails from our system click on this link <a href=\"www.email_advert.com/optOut.do?emailAddress=bafqoxz@dazdopq.org\">Please un-register my e-mail address</a></p><?$buffer = ob_get_contents();ob_clean();define(\"MESSAGE_BODY\", $buffer);?><?$buffer = ob_get_clean();$mailer = new PHPMailer();$mailer->From = \"jredden@matrix-consultants.com\";   				$mailer->FromName = \"matrix\";			$mailer->Sender = $mailer->From;$mailer->AddReplyTo(\"bafqoxz@dazdopq.org\",\"QA\");$mailer->Subject = \"mumblesOne information\";$mailer->IsHTML(true);$mailer->Body = MESSAGE_BODY;$mailer->IsSave();$mailer->AddAddress(\"<bafqoxz@dazdopq.org>\",\"QA\");if( ! ($result = $mailer->Send()) ):		echo $mailer->ErrorInfo;endif;echo $result;<?php require_once(\"classes/phpmailer.php\");ob_start();?><p>Cogito ergo spud, I&nbsp;think therefore I&nbsp;yam. &nbsp; &nbsp; <img src=\"http://www.email_advert.com/fckeditor/editor/images/smiley/msn/lightbulb.gif\" alt=\"\" />&nbsp;&nbsp;&nbsp; weee!&nbsp;&nbsp; happy happy joy joy!</p><br /><p>If you do not wish to receive future e-mails from our system click on this link <a href=\"www.email_advert.com/optOut.do?emailAddress=miffans@qetxayx.org\">Please un-register my e-mail address</a></p><?$buffer = ob_get_contents();ob_clean();define(\"MESSAGE_BODY\", $buffer);?><?$buffer = ob_get_clean();$mailer = new PHPMailer();$mailer->From = \"jredden@matrix-consultants.com\";   				$mailer->FromName = \"matrix\";			$mailer->Sender = $mailer->From;$mailer->AddReplyTo(\"miffans@qetxayx.org\",\"QA\");$mailer->Subject = \"mumblesOne information\";$mailer->IsHTML(true);$mailer->Body = MESSAGE_BODY;$mailer->AddEmbeddedImage(\"lightbulb.gif\",\"lightbulb\", \"\", \"base64\", \".\");$mailer->IsSave();$mailer->AddAddress(\"<miffans@qetxayx.org>\",\"QA\");if( ! ($result = $mailer->Send()) ):		echo $mailer->ErrorInfo;endif;echo $result;<?php require_once(\"classes/phpmailer.php\");ob_start();?>	<Template title=\"Image and Title\" image=\"http://www.email_advert.com/_m/NoImage.jpg\">	<Description>Master</Description>		<Html>			<![CDATA[<p>Non illigitum corbundum est.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src=\"http://www.email_advert.com/fckeditor/editor/images/smiley/msn/devil_smile.gif\" alt=\"\" /></p><ol>    <li>ouch</li>    <li>revenge</li>    <li>forgiveness</li></ol>			]]>		</Html>	</Template><p>If you do not wish to receive future e-mails from our system click on this link <a href=\"www.email_advert.com/optOut.do?emailAddress=miffans@qetxayx.org\">Please un-register my e-mail address</a></p><?$buffer = ob_get_contents();ob_clean();define(\"MESSAGE_BODY\", $buffer);?><?$buffer = ob_get_clean();$mailer = new PHPMailer();$mailer->From = \"jredden@matrix-consultants.com\";   	$mailer->FromName = \"matrix\";			$mailer->Sender = $mailer->From;$mailer->AddReplyTo(\"miffans@qetxayx.org\",\"QA\");$mailer->Subject = \"mumblesOne information\";$mailer->IsHTML(true);$mailer->Body = MESSAGE_BODY;$mailer->AddEmbeddedImage(\"devil_smile.gif\",\"devil_smile\", \"\", \"base64\", \".\");$mailer->IsSave();$mailer->AddAddress(\"<miffans@qetxayx.org>\",\"QA\");if( ! ($result = $mailer->Send()) ):		echo $mailer->ErrorInfo;endif;echo $result;<?php require_once(\"classes/phpmailer.php\");ob_start();?><p>Non illigitum corbundum est.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img alt=\"\" src=\"http://www.email_advert.com/_m/Speaker_256.png\" /></p><ol>    <li>ouch</li>    <li>revenge</li>    <li>forgiveness</li>    <li>joy</li>    <li>&nbsp;</li></ol><p>If you do not wish to receive future e-mails from our system click on this link <a href=\"www.email_advert.com/optOut.do?emailAddress=miffans@qetxayx.org\">Please un-register my e-mail address</a></p><?$buffer = ob_get_contents();ob_clean();define(\"MESSAGE_BODY\", $buffer);?><?$buffer = ob_get_clean();$mailer = new PHPMailer();$mailer->From = \"jredden@matrix-consultants.com\";   				$mailer->FromName = \"matrix\";			$mailer->Sender = $mailer->From;$mailer->AddReplyTo(\"miffans@qetxayx.org\",\"QA\");$mailer->Subject = \"mumblesOne information\";$mailer->IsHTML(true);$mailer->Body = MESSAGE_BODY;$mailer->AddEmbeddedImage(\"devil_smile.gif\",\"devil_smile\", \"\", \"base64\", \".\");$mailer->IsSave();$mailer->AddAddress(\"<miffans@qetxayx.org>\",\"QA\");if( ! ($result = $mailer->Send()) ):		echo $mailer->ErrorInfo;endif;echo $result;<?php require_once(\"classes/phpmailer.php\");ob_start();?>Type in Data and/or load a Template<p>If you do not wish to receive future e-mails from our system click on this link <a href=\"www.email_advert.com/optOut.do?emailAddress=miffans@qetxayx.org\">Please un-register my e-mail address</a></p><?$buffer = ob_get_contents();ob_clean();define(\"MESSAGE_BODY\", $buffer);?><?$buffer = ob_get_clean();$mailer = new PHPMailer();$mailer->From = \"jredden@matrix-consultants.com\";   				$mailer->FromName = \"matrix\";			$mailer->Sender = $mailer->From;$mailer->AddReplyTo(\"miffans@qetxayx.org\",\"QA\");$mailer->Subject = \"mumblesOne information\";$mailer->IsHTML(true);$mailer->Body = MESSAGE_BODY;$mailer->IsSave();$mailer->AddAddress(\"<miffans@qetxayx.org>\",\"QA\");if( ! ($result = $mailer->Send()) ):		echo $mailer->ErrorInfo;endif;echo $result;";
		String copy = emailService.replaceUrisWithCids(pageStuff, list);
		System.out.println(copy);
		testIt = true;
		assertTrue(testIt);		
	}

	
}
